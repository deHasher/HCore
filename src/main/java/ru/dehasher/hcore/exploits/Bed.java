package ru.dehasher.hcore.exploits;

import org.bukkit.event.EventHandler;
import org.bukkit.event.EventPriority;
import org.bukkit.event.Listener;
import org.bukkit.event.inventory.InventoryOpenEvent;
import org.bukkit.event.player.PlayerCommandPreprocessEvent;

import ru.dehasher.hcore.HCore;

public class Bed implements Listener {
    public Bed(HCore plugin) {}

	@EventHandler(priority = EventPriority.HIGHEST)
	public void onInventoryOpenEvent(InventoryOpenEvent e) {
		if (!HCore.config.getBoolean("fix-exploits.bed.disable-inventory")) return;
		if (e.getPlayer().isSleeping()) {
			e.setCancelled(true);
		}
    }

	@EventHandler(priority = EventPriority.HIGHEST)
	public void onPlayerCommandPreprocessEvent(PlayerCommandPreprocessEvent e) {
		if (!HCore.config.getBoolean("fix-exploits.bed.disable-commands")) return;
		if (e.getMessage().startsWith("/") && e.getPlayer().isSleeping()) {
			e.setCancelled(true);
		}
	}
}
